<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Buy Button - SK</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 5px; }
        .test-section h3 { margin-top: 0; }
        #delivery-info, #user-menu { background: white; padding: 10px; margin: 10px 0; }
        #console-output { 
            background: #1e1e1e; 
            color: #d4d4d4; 
            padding: 15px; 
            border-radius: 5px; 
            font-family: monospace;
            max-height: 300px;
            overflow-y: auto;
        }
        .log { color: #4ec9b0; }
        .warn { color: #dcdcaa; }
        .error { color: #f48771; }
    </style>
</head>
<body>
    <h1>ðŸ§ª Test Buy Button Script (SK locale simulation)</h1>
    <p><strong>SimulovanÃ¡ URL:</strong> https://sk.meer.cz/product</p>
    
    <div class="test-section">
        <h3>Console Output:</h3>
        <div id="console-output"></div>
    </div>

    <div class="test-section">
        <h3>Delivery Info:</h3>
        <div id="delivery-info">
            <p>Threshold: <span id="delivery-treshold">Loading...</span></p>
            <p>Speed: <span id="delivery-speed">Loading...</span></p>
        </div>
    </div>

    <div class="test-section">
        <h3>User Links (should point to meer.beauty):</h3>
        <div id="user-menu">
            <a href="#" id="user-orders">Orders</a> |
            <a href="#" id="user-login">Login</a>
        </div>
    </div>

    <script>
        // Override window.location.href for testing
        Object.defineProperty(window, 'location', {
            value: {
                href: 'https://sk.meer.cz/product',
                hostname: 'sk.meer.cz'
            },
            writable: true
        });

        // Override console
        const output = document.getElementById('console-output');
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;

        console.log = function(...args) {
            originalLog.apply(console, args);
            output.innerHTML += `<div class="log">LOG: ${args.join(' ')}</div>`;
        };

        console.warn = function(...args) {
            originalWarn.apply(console, args);
            output.innerHTML += `<div class="warn">WARN: ${args.join(' ')}</div>`;
        };

        console.error = function(...args) {
            originalError.apply(console, args);
            output.innerHTML += `<div class="error">ERROR: ${args.join(' ')}</div>`;
        };

        // Set development mode
        globalThis.process = { env: { NODE_ENV: 'development' } };
    </script>

    <script src="buybutton.js"></script>

    <script>
        setTimeout(() => {
            console.log('=== Test Results (SK) ===');
            console.log('Locale detected:', typeof locale !== 'undefined' ? locale : 'ERROR');
            console.log('Expected: sk');
            console.log('Orders link:', document.getElementById('user-orders')?.href);
            console.log('Login link:', document.getElementById('user-login')?.href);
            console.log('Expected base URL: https://www.meer.beauty');
        }, 1000);
    </script>
</body>
</html>
